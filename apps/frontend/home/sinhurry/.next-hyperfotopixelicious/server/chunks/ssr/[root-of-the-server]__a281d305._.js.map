{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 13, "column": 0}, "map": {"version":3,"sources":["file:///home/sinhurry/Documents/GitHub/hyperfotopixelicious/apps/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\n\nconst API = process.env.NEXT_PUBLIC_API_BASE || \"http://localhost:8000\";\ntype Item = { id:number; title:string|null; url:string };\n\nexport default function Home() {\n  const [items, setItems] = useState<Item[]>([]);\n  const fileRef = useRef<HTMLInputElement>(null);\n\n  async function refresh() {\n    const r = await fetch(`${API}/images`);\n    setItems(await r.json());\n  }\n  useEffect(() => { refresh(); }, []);\n\n  async function upload(files: FileList | null) {\n    if (!files || files.length === 0) return;\n    const fd = new FormData();\n    Array.from(files).forEach(f => fd.append(\"files\", f));\n    const r = await fetch(`${API}/upload`, { method: \"POST\", body: fd });\n    if (r.ok) await refresh();\n  }\n\n  // drag-and-drop upload onto the + tile\n  function handleDrop(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n    upload(e.dataTransfer.files);\n  }\n  function handleDragOver(e: React.DragEvent<HTMLDivElement>) {\n    e.preventDefault();\n  }\n\n  async function remove(id:number) {\n    await fetch(`${API}/images/${id}`, { method: \"DELETE\" });\n    await refresh();\n  }\n\n  async function annotate(id:number) {\n    const text = prompt(\"Text to write on image:\");\n    if (!text) return;\n    const fd = new FormData();\n    fd.append(\"image_id\", String(id));\n    fd.append(\"text\", text);\n    const r = await fetch(`${API}/annotate`, { method: \"POST\", body: fd });\n    if (r.ok) await refresh();\n  }\n\n  return (\n    <main className=\"min-h-screen\">\n      {/* NavBar */}\n      <nav className=\"sticky top-0 z-10 bg-white/80 backdrop-blur border-b\">\n        <div className=\"mx-auto max-w-6xl px-4 py-3 flex items-center justify-between\">\n          <h1 className=\"text-lg font-semibold\">Hyperfotopixelicious</h1>\n\n          <div className=\"flex items-center gap-3\">\n            {/* Add (navbar button mirrors the + tile) */}\n            <button\n              onClick={() => fileRef.current?.click()}\n              className=\"inline-flex items-center gap-2 rounded-xl border px-3 py-2\"\n              title=\"Pick multiple WhatsApp images to import\"\n            >\n              Import from WhatsApp\n            </button>\n            <button onClick={refresh} className=\"rounded-xl border px-3 py-2\">\n              Refresh\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Hidden picker (also used by + tile) */}\n      <input\n        ref={fileRef}\n        type=\"file\"\n        multiple\n        accept=\"image/*\"\n        onChange={(e)=> upload(e.target.files)}\n        className=\"hidden\"\n      />\n\n      {/* Grid = images + one permanent + tile */}\n      <section className=\"mx-auto max-w-6xl px-4 py-6 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4\">\n        {/* existing images */}\n        {items.map(it => (\n          <article key={it.id} className=\"group border rounded-2xl overflow-hidden\">\n            <img src={it.url} alt={it.title ?? \"image\"} className=\"w-full aspect-square object-cover\" />\n            <div className=\"p-2 flex gap-3\">\n              <button onClick={()=>annotate(it.id)} className=\"text-sm underline\">Add text</button>\n              <button onClick={()=>remove(it.id)} className=\"text-sm text-red-600 underline\">Delete</button>\n            </div>\n          </article>\n        ))}\n\n        {/* + tile (drop or click to add) */}\n        <div\n          onDrop={handleDrop}\n          onDragOver={handleDragOver}\n          onClick={() => fileRef.current?.click()}\n          title=\"Drop images here or click to pick\"\n          className=\"cursor-pointer rounded-2xl border-2 border-dashed flex items-center justify-center aspect-square bg-white hover:bg-gray-50\"\n        >\n          <div className=\"w-20 h-20 rounded-3xl border relative\">\n            <span className=\"absolute inset-0 before:absolute before:inset-x-1/2 before:-translate-x-1/2 before:top-3 before:bottom-3 before:w-[3px] before:bg-black\n                               after:absolute after:inset-y-1/2 after:-translate-y-1/2 after:left-3 after:right-3 after:h-[3px] after:bg-black\"></span>\n          </div>\n        </div>\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIA,MAAM,MAAM,QAAQ,GAAG,CAAC,oBAAoB,IAAI;AAGjC,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,UAAU,CAAA,GAAA,oUAAA,CAAA,SAAM,AAAD,EAAoB;IAEzC,eAAe;QACb,MAAM,IAAI,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC;QACrC,SAAS,MAAM,EAAE,IAAI;IACvB;IACA,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QAAQ;IAAW,GAAG,EAAE;IAElC,eAAe,OAAO,KAAsB;QAC1C,IAAI,CAAC,SAAS,MAAM,MAAM,KAAK,GAAG;QAClC,MAAM,KAAK,IAAI;QACf,MAAM,IAAI,CAAC,OAAO,OAAO,CAAC,CAAA,IAAK,GAAG,MAAM,CAAC,SAAS;QAClD,MAAM,IAAI,MAAM,MAAM,GAAG,IAAI,OAAO,CAAC,EAAE;YAAE,QAAQ;YAAQ,MAAM;QAAG;QAClE,IAAI,EAAE,EAAE,EAAE,MAAM;IAClB;IAEA,uCAAuC;IACvC,SAAS,WAAW,CAAkC;QACpD,EAAE,cAAc;QAChB,OAAO,EAAE,YAAY,CAAC,KAAK;IAC7B;IACA,SAAS,eAAe,CAAkC;QACxD,EAAE,cAAc;IAClB;IAEA,eAAe,OAAO,EAAS;QAC7B,MAAM,MAAM,GAAG,IAAI,QAAQ,EAAE,IAAI,EAAE;YAAE,QAAQ;QAAS;QACtD,MAAM;IACR;IAEA,eAAe,SAAS,EAAS;QAC/B,MAAM,OAAO,OAAO;QACpB,IAAI,CAAC,MAAM;QACX,MAAM,KAAK,IAAI;QACf,GAAG,MAAM,CAAC,YAAY,OAAO;QAC7B,GAAG,MAAM,CAAC,QAAQ;QAClB,MAAM,IAAI,MAAM,MAAM,GAAG,IAAI,SAAS,CAAC,EAAE;YAAE,QAAQ;YAAQ,MAAM;QAAG;QACpE,IAAI,EAAE,EAAE,EAAE,MAAM;IAClB;IAEA,qBACE,6WAAC;QAAK,WAAU;;0BAEd,6WAAC;gBAAI,WAAU;0BACb,cAAA,6WAAC;oBAAI,WAAU;;sCACb,6WAAC;4BAAG,WAAU;sCAAwB;;;;;;sCAEtC,6WAAC;4BAAI,WAAU;;8CAEb,6WAAC;oCACC,SAAS,IAAM,QAAQ,OAAO,EAAE;oCAChC,WAAU;oCACV,OAAM;8CACP;;;;;;8CAGD,6WAAC;oCAAO,SAAS;oCAAS,WAAU;8CAA8B;;;;;;;;;;;;;;;;;;;;;;;0BAQxE,6WAAC;gBACC,KAAK;gBACL,MAAK;gBACL,QAAQ;gBACR,QAAO;gBACP,UAAU,CAAC,IAAK,OAAO,EAAE,MAAM,CAAC,KAAK;gBACrC,WAAU;;;;;;0BAIZ,6WAAC;gBAAQ,WAAU;;oBAEhB,MAAM,GAAG,CAAC,CAAA,mBACT,6WAAC;4BAAoB,WAAU;;8CAC7B,6WAAC;oCAAI,KAAK,GAAG,GAAG;oCAAE,KAAK,GAAG,KAAK,IAAI;oCAAS,WAAU;;;;;;8CACtD,6WAAC;oCAAI,WAAU;;sDACb,6WAAC;4CAAO,SAAS,IAAI,SAAS,GAAG,EAAE;4CAAG,WAAU;sDAAoB;;;;;;sDACpE,6WAAC;4CAAO,SAAS,IAAI,OAAO,GAAG,EAAE;4CAAG,WAAU;sDAAiC;;;;;;;;;;;;;2BAJrE,GAAG,EAAE;;;;;kCAUrB,6WAAC;wBACC,QAAQ;wBACR,YAAY;wBACZ,SAAS,IAAM,QAAQ,OAAO,EAAE;wBAChC,OAAM;wBACN,WAAU;kCAEV,cAAA,6WAAC;4BAAI,WAAU;sCACb,cAAA,6WAAC;gCAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5B","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///home/sinhurry/Documents/GitHub/hyperfotopixelicious/node_modules/.pnpm/next%4015.4.6_react-dom%4019.1.0_react%4019.1.0__react%4019.1.0/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///home/sinhurry/Documents/GitHub/hyperfotopixelicious/node_modules/.pnpm/next%4015.4.6_react-dom%4019.1.0_react%4019.1.0__react%4019.1.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,uMACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///home/sinhurry/Documents/GitHub/hyperfotopixelicious/node_modules/.pnpm/next%4015.4.6_react-dom%4019.1.0_react%4019.1.0__react%4019.1.0/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,uMACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}